<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MineCraft Miner</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –®—Ä–∏—Ñ—Ç Minecraft */
        @font-face {
            font-family: 'Minecraft';
            src: url('https://cdn.jsdelivr.net/gh/South-Paw/typeface-minecraft/dist/Minecraft.woff2') format('woff2');
        }

        :root {
            --slot-bg: #8b8b8b;
            --slot-border-light: #ffffff;
            --slot-border-dark: #373737;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Minecraft', sans-serif;
            background-color: #6eb1ff; /* –¶–≤–µ—Ç –Ω–µ–±–∞ */
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
            user-select: none;
            position: relative;
        }

        /* --- –§–û–ù (–û–±–ª–∞–∫–∞) --- */
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 4px;
            z-index: 0;
            animation: moveCloud 20s linear infinite;
        }
        @keyframes moveCloud { from { left: -20%; } to { left: 120%; } }

        /* --- UI –ò–ù–í–ï–ù–¢–ê–†–¨ (–í–ï–†–•) --- */
        .ui-container {
            z-index: 10;
            margin-top: 20px;
            background: #c6c6c6;
            border: 4px solid #373737;
            padding: 5px;
            box-shadow: inset 4px 4px #fff, inset -4px -4px #555;
            width: 90%;
            max-width: 350px;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
        }

        .slot {
            width: 100%;
            aspect-ratio: 1;
            background: #8b8b8b;
            border-right: 2px solid #fff;
            border-bottom: 2px solid #fff;
            border-top: 2px solid #373737;
            border-left: 2px solid #373737;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .item-icon { filter: drop-shadow(2px 2px 0 #000); }

        /* --- –ò–ì–†–û–í–û–ï –ü–û–õ–ï (–°–ï–†–ï–î–ò–ù–ê) --- */
        .game-field {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-end; /* –ë–ª–æ–∫–∏ —Ä–∞—Å—Ç—É—Ç —Å–Ω–∏–∑—É */
            gap: 5px;
            width: 90%;
            max-width: 350px;
            margin-bottom: 10px;
            z-index: 10;
            padding-bottom: 60px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ —Å—É–Ω–¥—É–∫–∏ */
            position: relative;
        }

        .column {
            flex: 1;
            display: flex;
            flex-direction: column; /* –°–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ */
            justify-content: flex-end;
            align-items: center;
            position: relative;
            height: 100%; 
        }

        /* --- –ë–õ–û–ö–ò --- */
        .block {
            width: 100%;
            aspect-ratio: 1;
            margin-bottom: 2px;
            position: relative;
            border: 2px solid rgba(0,0,0,0.2);
            image-rendering: pixelated;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            text-shadow: 1px 1px 0 #000;
            transition: transform 0.1s;
        }
        
        /* CSS-—Ç–µ–∫—Å—Ç—É—Ä—ã –±–ª–æ–∫–æ–≤ */
        .b-dirt { background: #5d4037; }
        .b-stone { background: #757575; }
        /* –†—É–¥–∞ (—Å–µ—Ä—ã–π —Ñ–æ–Ω + —Ç–æ—á–∫–∏) */
        .b-redstone { 
            background: #757575; 
            background-image: radial-gradient(#ff0000 15%, transparent 16%), radial-gradient(#ff0000 15%, transparent 16%);
            background-size: 10px 10px; background-position: 0 0, 5px 5px;
        }
        .b-gold { background: #fbc02d; border: 2px solid #f57f17; }
        .b-diamond { background: #00bcd4; border: 2px solid #0097a7; box-shadow: inset 0 0 10px #e0f7fa; }
        .b-obsidian { background: #181818; border: 2px solid #4a148c; }

        /* –¢—Ä–µ—â–∏–Ω—ã (overlay) */
        .cracks {
            position: absolute; top:0; left:0; right:0; bottom:0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><path d="M10,10 L90,90 M90,10 L10,90" stroke="black" stroke-width="2" opacity="0.5"/></svg>');
            opacity: 0;
            pointer-events: none;
        }

        /* --- –°–£–ù–î–£–ö–ò (–°–ù–ò–ó–£) --- */
        .chest-row {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            gap: 5px;
            height: 50px;
        }

        .chest {
            flex: 1;
            background: #a16b47; /* –î–µ—Ä–µ–≤–æ */
            border: 2px solid #3e2723;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            position: relative;
        }
        
        .chest::after { /* –ó–∞–º–æ–∫ */
            content: '';
            width: 6px; height: 8px;
            background: #ccc; border: 1px solid #000;
        }

        /* --- –ó–ï–ú–õ–Ø (–§–£–¢–ï–†) --- */
        .ground {
            width: 100%;
            height: 80px;
            background-color: #5d4037; /* –ó–µ–º–ª—è */
            border-top: 10px solid #589c28; /* –¢—Ä–∞–≤–∞ */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .balance-display {
            background: #373737;
            color: #fff;
            padding: 5px 20px;
            border: 3px solid #fff;
            font-size: 24px;
            border-radius: 4px;
            text-shadow: 2px 2px #000;
        }

        .spin-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            z-index: 100; display: none;
        }
        
        /* Animations */
        @keyframes shake {
            0% { transform: translate(0, 0); }
            25% { transform: translate(-2px, 2px); }
            50% { transform: translate(2px, -2px); }
            75% { transform: translate(-2px, 0); }
            100% { transform: translate(0, 0); }
        }
        .shaking { animation: shake 0.2s; }

        @keyframes popUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }
        .float-text {
            position: absolute; bottom: 50px; left: 0; width: 100%;
            text-align: center; font-weight: bold;
            text-shadow: 2px 2px 0 #000;
            animation: popUp 1.5s forwards;
            pointer-events: none; z-index: 50;
        }
    </style>
</head>
<body>
    
    <!-- –î–µ–∫–æ—Ä: –û–±–ª–∞–∫–∞ -->
    <div class="cloud" style="width: 100px; height: 30px; top: 10%; left: -20%;"></div>
    <div class="cloud" style="width: 80px; height: 25px; top: 20%; left: -40%; animation-duration: 25s;"></div>

    <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–°–ª–æ—Ç—ã) -->
    <div class="ui-container">
        <div class="inventory-grid" id="slots">
            <!-- 15 —è—á–µ–µ–∫ -->
        </div>
    </div>

    <div style="color: white; margin-top: 5px; text-shadow: 1px 1px 0 #000; font-size: 14px;">
        –ù–∞–∂–º–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å, —á—Ç–æ–±—ã –∫–æ–ø–∞—Ç—å (100$)
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
    <div class="game-field" id="field">
        <!-- –ö–æ–ª–æ–Ω–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è JS -->
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ó–µ–º–ª—è) -->
    <div class="ground" onclick="spin()">
        <div class="balance-display">
            <span id="balance">2500</span> $
        </div>
    </div>

    <div class="spin-overlay" id="blocker"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // --- –ù–ê–°–¢–†–û–ô–ö–ò ---
        const CONFIG = {
            cost: 100,
            cols: 5,
            
            // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
            tools: {
                wood: { id: 'wood', icon: 'ü™µ', dmg: 1, chance: 40 },
                stone: { id: 'stone', icon: 'ü™®', dmg: 2, chance: 30 },
                iron: { id: 'iron', icon: '‚ö™', dmg: 4, chance: 15 },
                diamond: { id: 'diamond', icon: 'üíé', dmg: 10, chance: 5 },
                tnt: { id: 'tnt', icon: 'üß®', dmg: 50, chance: 1 },
                empty: { id: 'empty', icon: '', dmg: 0, chance: 50 }
            },

            // –ë–ª–æ–∫–∏ (hp - –ø—Ä–æ—á–Ω–æ—Å—Ç—å)
            blocks: [
                { type: 'b-dirt', hp: 3, val: 1 },
                { type: 'b-stone', hp: 10, val: 2 },
                { type: 'b-redstone', hp: 20, val: 3 },
                { type: 'b-gold', hp: 40, val: 5 },
                { type: 'b-diamond', hp: 70, val: 8 },
                { type: 'b-obsidian', hp: 150, val: 10 }
            ]
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let balance = parseInt(localStorage.getItem('mc_miner_bal')) || 2500;
        let columnsData = []; // [ [{hp, maxHp, type}, ...], ... ]

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            renderBalance();
            createSlots();
            
            // –ü—Ä–æ–±—É–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–ª–æ–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ
            let saved = localStorage.getItem('mc_miner_cols');
            if (saved) {
                columnsData = JSON.parse(saved);
            } else {
                for(let i=0; i<CONFIG.cols; i++) generateColumn(i);
            }
            renderField();
        }

        function createSlots() {
            const grid = document.getElementById('slots');
            grid.innerHTML = '';
            for(let i=0; i<15; i++) {
                grid.innerHTML += `<div class="slot" id="slot-${i}"></div>`;
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–æ–ª–±—Ü–∞ (3-5 –±–ª–æ–∫–æ–≤)
        function generateColumn(colIndex) {
            let count = Math.floor(Math.random() * 3) + 3; // 3 to 5 blocks
            let stack = [];
            for(let i=0; i<count; i++) {
                // –ß–µ–º –≤—ã—à–µ –±–ª–æ–∫, —Ç–µ–º –æ–Ω –ø—Ä–æ—â–µ (–æ–±—ã—á–Ω–æ), –∏–ª–∏ —Ä–∞–Ω–¥–æ–º
                // –°–¥–µ–ª–∞–µ–º —á–∏—Å—Ç—ã–π —Ä–∞–Ω–¥–æ–º —Å –≤–µ—Å–∞–º–∏
                let r = Math.random();
                let b = CONFIG.blocks[0];
                if (r > 0.5) b = CONFIG.blocks[1];
                if (r > 0.75) b = CONFIG.blocks[2];
                if (r > 0.85) b = CONFIG.blocks[3];
                if (r > 0.95) b = CONFIG.blocks[4];
                if (r > 0.98) b = CONFIG.blocks[5];
                
                stack.push({ ...b, maxHp: b.hp });
            }
            columnsData[colIndex] = stack;
        }

        function renderField() {
            const field = document.getElementById('field');
            field.innerHTML = '';

            for(let c=0; c<CONFIG.cols; c++) {
                let colDiv = document.createElement('div');
                colDiv.className = 'column';
                colDiv.id = `col-${c}`;

                // –†–∏—Å—É–µ–º –±–ª–æ–∫–∏ (–∏–¥–µ–º –æ—Ç –Ω–∞—á–∞–ª–∞ –º–∞—Å—Å–∏–≤–∞, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç—Å—è "–í–µ—Ä—Ö–æ–º")
                // –ù–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –≤ HTML –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã stack[0] –±—ã–ª —Å–≤–µ—Ä—Ö—É.
                // Flex-direction column: —ç–ª–µ–º–µ–Ω—Ç 0 —Å–≤–µ—Ä—Ö—É.
                
                columnsData[c].forEach((block, bIdx) => {
                    let bDiv = document.createElement('div');
                    bDiv.className = `block ${block.type}`;
                    bDiv.id = `blk-${c}-${bIdx}`;
                    
                    // –†–∞—Å—á–µ—Ç —Ç—Ä–µ—â–∏–Ω
                    let hpPercent = block.hp / block.maxHp;
                    let opacity = 1 - hpPercent;
                    
                    bDiv.innerHTML = `
                        <span>${block.hp}</span>
                        <div class="cracks" style="opacity: ${opacity}"></div>
                    `;
                    colDiv.appendChild(bDiv);
                });

                // –°—É–Ω–¥—É–∫ –≤–Ω–∏–∑—É
                let chestRow = document.createElement('div');
                chestRow.className = 'chest-row'; // –∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                // –ú—ã –¥–æ–±–∞–≤–∏–º —Å—É–Ω–¥—É–∫ –ø—Ä—è–º–æ –≤ –∫–æ–ª–æ–Ω–∫—É –ø–æ—Å–ª–µ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
                let chest = document.createElement('div');
                chest.className = 'chest';
                chest.id = `chest-${c}`;
                colDiv.appendChild(chest);

                field.appendChild(colDiv);
            }
        }

        function renderBalance() {
            document.getElementById('balance').innerText = Math.floor(balance);
            localStorage.setItem('mc_miner_bal', Math.floor(balance));
            localStorage.setItem('mc_miner_cols', JSON.stringify(columnsData));
        }

        // --- –õ–û–ì–ò–ö–ê ---

        async function spin() {
            if (balance < CONFIG.cost) {
                tg.showAlert("–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∑–æ–ª–æ—Ç–∞!");
                return;
            }

            // –ë–ª–æ–∫–∏—Ä—É–µ–º –Ω–∞–∂–∞—Ç–∏—è
            document.getElementById('blocker').style.display = 'block';
            balance -= CONFIG.cost;
            renderBalance();
            tg.HapticFeedback.impactOccurred('medium');

            // 1. –ê–Ω–∏–º–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤
            const slots = document.querySelectorAll('.slot');
            let results = [];
            
            // "–ö—Ä—É—Ç–∏–º"
            for(let k=0; k<5; k++) {
                slots.forEach(s => s.innerText = Math.random() > 0.5 ? '' : '‚ùì');
                await new Promise(r => setTimeout(r, 50));
            }

            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            for(let i=0; i<15; i++) {
                let tool = getWeightedTool();
                results.push(tool);
                let el = document.getElementById(`slot-${i}`);
                el.innerText = tool.icon;
                if(tool.icon) el.classList.add('shaking');
            }
            setTimeout(() => slots.forEach(s => s.classList.remove('shaking')), 200);

            // 2. –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω
            await applyDamage(results);

            document.getElementById('blocker').style.display = 'none';
        }

        function getWeightedTool() {
            let rand = Math.random() * 100; // sum of chances approx
            // –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–±–æ—Ä
            let sum = 0;
            for(let key in CONFIG.tools) {
                sum += CONFIG.tools[key].chance;
                if(rand < sum) return CONFIG.tools[key];
            }
            return CONFIG.tools.empty;
        }

        async function applyDamage(results) {
            // results - –º–∞—Å—Å–∏–≤ 15 —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
            // columns - 5 —à—Ç—É–∫.
            // –ü–µ—Ä–≤—ã–µ 3 —ç–ª–µ–º–µ–Ω—Ç–∞ results -> —É—Ä–æ–Ω –∫–æ–ª–æ–Ω–∫–µ 0 (–∏–ª–∏ –∫–∞–∫ –≤ —Å–ª–æ—Ç–∞—Ö: –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏?)
            // –û–±—ã—á–Ω–æ –≤ —Å–ª–æ—Ç–∞—Ö 3 —Ä—è–¥–∞ –ø–æ 5 –∫–æ–ª–æ–Ω–æ–∫.
            // –°—Ç–æ–ª–±–µ—Ü 0 –∏–≥—Ä—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: slot[0], slot[5], slot[10].
            
            for(let col=0; col<CONFIG.cols; col++) {
                let totalDmg = 0;
                // –°–æ–±–∏—Ä–∞–µ–º —É—Ä–æ–Ω —Å–æ –≤—Å–µ—Ö 3 —Ä—è–¥–æ–≤ –¥–ª—è —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–∏
                for(let row=0; row<3; row++) {
                    let tool = results[row*5 + col];
                    totalDmg += tool.dmg;
                }

                if (totalDmg > 0) {
                    await hitColumn(col, totalDmg);
                }
            }
            renderBalance(); // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        }

        async function hitColumn(c, dmg) {
            let stack = columnsData[c];
            
            // –ï—Å–ª–∏ –±–ª–æ–∫–æ–≤ –Ω–µ—Ç - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º (—Å—É–Ω–¥—É–∫ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç –≤ –ø—Ä–æ—à–ª–æ–º —Ç–∞–∫—Ç–µ, –∂–¥–µ—Ç —Ä–µ—Å–µ—Ç–∞)
            // –ù–æ –º—ã —Ä–µ—Å–µ—Ç–∏–º —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è. –ó–Ω–∞—á–∏—Ç –±–ª–æ–∫–∏ –µ—Å—Ç—å –≤—Å–µ–≥–¥–∞.
            if(stack.length === 0) return;

            // –ë—å–µ–º –í–°–ï–ì–î–ê –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ (–∏–Ω–¥–µ–∫—Å 0)
            let topBlock = stack[0];
            let domBlock = document.getElementById(`blk-${c}-0`); // 0 –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–π –≤ DOM

            if(domBlock) {
                domBlock.classList.add('shaking');
                setTimeout(()=>domBlock.classList.remove('shaking'), 200);
            }

            topBlock.hp -= dmg;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª (—á–∏—Å–ª–∞ –∏ —Ç—Ä–µ—â–∏–Ω—ã)
            if(topBlock.hp > 0) {
                if(domBlock) {
                    domBlock.querySelector('span').innerText = topBlock.hp;
                    let opacity = 1 - (topBlock.hp / topBlock.maxHp);
                    domBlock.querySelector('.cracks').style.opacity = opacity;
                }
            } else {
                // –ë–ª–æ–∫ —Å–ª–æ–º–∞–Ω!
                // –û—Å—Ç–∞—Ç–æ—á–Ω—ã–π —É—Ä–æ–Ω? –í —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ—Ç, —É—Ö–æ–¥–∏—Ç –≤ –Ω–∏–∫—É–¥–∞ (—Ö–∞—Ä–¥–∫–æ—Ä).
                stack.shift(); // –£–¥–∞–ª—è–µ–º –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
                if(domBlock) {
                    domBlock.style.opacity = 0;
                    domBlock.style.transform = "scale(0)";
                }
                
                await new Promise(r => setTimeout(r, 200));
                
                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ (—Å–¥–≤–∏–≥ –±–ª–æ–∫–æ–≤ –≤–≤–µ—Ä—Ö)
                renderField(); 

                // –ï—Å–ª–∏ —Å—Ç–µ–∫ —Å—Ç–∞–ª –ø—É—Å—Ç - –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å—É–Ω–¥—É–∫
                if(stack.length === 0) {
                    await openChest(c);
                }
            }
        }

        async function openChest(c) {
            let chest = document.getElementById(`chest-${c}`);
            chest.style.background = "#ffeb3b"; // –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è
            
            // –†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã
            // –ß—Ç–æ–±—ã –Ω–µ –æ–∫—É–ø–∞–ª–æ—Å—å:
            // –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–Ω –∑–∞ —Å–ø–∏–Ω ~3-5. –°—Ä–µ–¥–Ω–µ–µ HP —Å—Ç–æ–ª–±–∞ ~50. –ù—É–∂–Ω–æ 10 —Å–ø–∏–Ω–æ–≤ (1000$).
            // –ù–∞–≥—Ä–∞–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å random(100, 1500). –°—Ä–µ–¥–Ω–µ–µ 800. –ò—Ç–æ–≥ -200.
            
            let win = Math.floor(Math.random() * 1200) + 100;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç
            let float = document.createElement('div');
            float.className = 'float-text';
            float.innerText = `+${win}$`;
            float.style.color = '#ffff00';
            document.getElementById(`col-${c}`).appendChild(float);
            
            tg.HapticFeedback.notificationOccurred('success');
            balance += win;
            
            await new Promise(r => setTimeout(r, 1000));
            
            // –†–µ—Å–ø–∞–≤–Ω –∫–æ–ª–æ–Ω–∫–∏
            generateColumn(c);
            renderField();
        }

        init();

    </script>
</body>
</html>
